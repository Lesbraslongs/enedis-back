{"version":3,"sources":["../db/data.js"],"names":["createDataForUser","userId","data","unit","type","usagePointId","DBdata","map","timestamp","e","value","Data","bulkCreate","deleteDataForUser","findAll","where","then","datas","foreach","d","destroy","force","getDataForUserByType","order"],"mappings":";;;;;;;AAAA;;AAEO,IAAMA,gDAAoB,SAApBA,iBAAoB,CAACC,MAAD,EAASC,IAAT,EAAeC,IAAf,EAAqBC,IAArB,EAA2BC,YAA3B,EAA4C;AAC3E,MAAMC,SAASJ,KAAKK,GAAL,CAAS;AAAA,WAAM;AAC5BJ,gBAD4B;AAE5BK,iBAAWC,EAAED,SAFe;AAG5BE,aAAOD,EAAEC,KAHmB;AAI5BT,oBAJ4B;AAK5BG,gBAL4B;AAM5BC;AAN4B,KAAN;AAAA,GAAT,CAAf;AAQA,SAAOM,YAAKC,UAAL,CAAgBN,MAAhB,CAAP;AACD,CAVM;;AAYA,IAAMO,gDAAoB,SAApBA,iBAAoB,SAAU;AACzC,SAAOF,YAAKG,OAAL,CAAa,EAAEC,OAAO,EAAEd,cAAF,EAAT,EAAb,EAAoCe,IAApC,CAAyC,iBAAS;AACvDC,UAAMC,OAAN,CAAc;AAAA,aAAKC,EAAEC,OAAF,CAAU,EAAEC,OAAO,IAAT,EAAV,CAAL;AAAA,KAAd;AACD,GAFM,CAAP;AAGA;AACD,CALM;;AAOA,IAAMC,sDAAuB,SAAvBA,oBAAuB,CAACrB,MAAD,EAASG,IAAT,EAAkB;AACpD,SAAOO,YAAKG,OAAL,CAAa;AAClBC,WAAO,EAAEd,cAAF,EAAUG,UAAV,EADW;AAElBmB,WAAO,CAAC,CAAC,WAAD,EAAc,MAAd,CAAD;AAFW,GAAb,CAAP;AAID,CALM","file":"data.js","sourcesContent":["import { Data, User } from './index';\n\nexport const createDataForUser = (userId, data, unit, type, usagePointId) => {\n  const DBdata = data.map(e => ({\n    unit,\n    timestamp: e.timestamp,\n    value: e.value,\n    userId,\n    type,\n    usagePointId,\n  }));\n  return Data.bulkCreate(DBdata);\n};\n\nexport const deleteDataForUser = userId => {\n  return Data.findAll({ where: { userId } }).then(datas => {\n    datas.foreach(d => d.destroy({ force: true }));\n  });\n  //return Data.destroy({ where: { userId } });\n};\n\nexport const getDataForUserByType = (userId, type) => {\n  return Data.findAll({\n    where: { userId, type },\n    order: [['timestamp', 'DESC']],\n  });\n};\n"]}